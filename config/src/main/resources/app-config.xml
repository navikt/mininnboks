<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://appconfig.aura.nav.no" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://appconfig.aura.nav.no http://maven.adeo.no/xsd/appconfig.xsd">

    <name>mininnboks</name>

    <selftestPagePath>/mininnboks/internal/selftest</selftestPagePath>

    <artifacts>
        <ear groupId="no.nav.sbl.dialogarena" artifactId="mininnboks-jee"/>
    </artifacts>

    <resources>
        <baseUrl alias="appres.cms" mapToProperty="appres.cms"/>
        <baseUrl alias="mininnboks.link" mapToProperty="mininnboks.link"/>
        <baseUrl alias="dittnav.link" mapToProperty="dittnav.link"/>
        <baseUrl alias="temavelger.link" mapToProperty="temavelger.link"/>
        <baseUrl alias="brukerprofil.link" mapToProperty="brukerprofil.link"/>

        <credential alias="srvmininnboks" mapToProperty="systembruker"/>
        <applicationCertificate alias="srvmininnboks"/>

        <webservice alias="domene.Brukerdialog:Henvendelse_v2" mapToProperty="henvendelse.ws"/>
        <webservice alias="virksomhet:Diskresjonskode_v1" mapToProperty="diskresjonskode.ws"/>
        <webservice alias="virksomhet:Brukerprofil_v3" mapToProperty="brukerprofil.v3"/>
        <webservice alias="domene.Brukerdialog:SendInnHenvendelse_v1" mapToProperty="send.inn.henvendelse.ws"/>
        <webservice alias="domene.Brukerdialog:InnsynHenvendelse_v1" mapToProperty="innsyn.henvendelse.ws"/>
    </resources>

    <exposed-services>
        <exposedUrl name="mininnboks" path="/mininnboks">
            <exportToZone>ALL</exportToZone>
        </exposedUrl>
    </exposed-services>

    <security serviceUserResourceAlias="srvmininnboks">
        <logins>
            <openAm>
                <contextRoot>mininnboks</contextRoot>
            </openAm>
        </logins>
    </security>

    <loadBalancer>
        <contextRoot>mininnboks</contextRoot>
        <lbHealthMonitor type="HTTPS" isAliveUrl="internal/isAlive" interval="5" timeout="16"/>
        <lbPool slowRampTime="30" loadBalancingMethod="LEAST_CONNECTIONS" connectionLimit="500"/>
    </loadBalancer>

</application>
